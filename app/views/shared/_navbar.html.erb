<style>
  .css-dropdown {
    position: relative;
  }
  .css-dropdown-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    min-width: 10rem;
    padding: 0.5rem 0;
    margin: 0;
    background-color: #fff;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 0.375rem;
    box-shadow: 0 0.5rem 1rem rgba(0,0,0,.175);
    z-index: 1000;
    list-style: none;
  }
  .css-dropdown:hover .css-dropdown-menu,
  .css-dropdown:focus-within .css-dropdown-menu {
    display: block;
  }
  .css-dropdown-menu .dropdown-item {
    display: block;
    width: 100%;
    padding: 0.25rem 1rem;
    clear: both;
    text-decoration: none;
    white-space: nowrap;
  }
  .css-dropdown-menu .dropdown-item {
    position: relative;
  }
  .css-dropdown-menu .dropdown-item::after {
    content: '';
    position: absolute;
    left: 1rem;
    right: 1rem;
    bottom: 0;
    height: 2px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease;
  }
  .css-dropdown-menu .dropdown-item:hover::after {
    transform: scaleX(1);
  }
  .css-dropdown-menu .dropdown-item {
    width: fit-content;
  }
  .css-dropdown-menu li {
    list-style: none;
  }

  /* Navbar links underline effect */
  .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle) {
    position: relative;
  }
  .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle)::after {
    content: '';
    position: absolute;
    left: 50%;
    bottom: 0;
    width: calc(100% - 1.5rem);
    height: 2px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    transform: translateX(-50%) scaleX(0);
    transform-origin: center;
    transition: transform 0.3s ease;
  }
  .navbar-nav > .nav-item > .nav-link:not(.dropdown-toggle):hover::after {
    transform: translateX(-50%) scaleX(1);
  }
</style>
<nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom sticky-top" style="padding-top: 0; padding-bottom: 0;" id="main-navbar">
    <div class="container-fluid px-4 px-lg-5">
      <%= link_to families_path, class: "navbar-brand d-flex align-items-center", style: "padding: 4px 0; margin: 0;" do %>
        <svg viewBox="0 0 340 70" xmlns="http://www.w3.org/2000/svg" style="height: 48px; width: auto;">
          <defs>
            <linearGradient id="houseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
            </linearGradient>
            <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
            </linearGradient>
          </defs>
          <g id="village-icon" transform="translate(-5, -15)">
            <path d="M 40 50 L 60 30 L 80 50 L 80 75 L 40 75 Z" fill="url(#houseGradient)" stroke="#4F46E5" stroke-width="2"/>
            <rect x="52" y="60" width="16" height="15" fill="#ffffff" opacity="0.8"/>
            <circle cx="56" cy="45" r="3" fill="#ffffff" opacity="0.9"/>
            <circle cx="64" cy="45" r="3" fill="#ffffff" opacity="0.9"/>
            <path d="M 15 60 L 30 48 L 45 60 L 45 75 L 15 75 Z" fill="#667eea" opacity="0.8"/>
            <rect x="23" y="65" width="8" height="10" fill="#ffffff" opacity="0.7"/>
            <path d="M 75 60 L 90 48 L 105 60 L 105 75 L 75 75 Z" fill="#764ba2" opacity="0.8"/>
            <rect x="85" y="65" width="8" height="10" fill="#ffffff" opacity="0.7"/>
            <circle cx="25" cy="80" r="4" fill="#10b981" opacity="0.6"/>
            <rect x="24" y="80" width="2" height="6" fill="#059669"/>
            <circle cx="95" cy="80" r="4" fill="#10b981" opacity="0.6"/>
            <rect x="94" y="80" width="2" height="6" fill="#059669"/>
          </g>
          <text x="105" y="32" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="url(#textGradient)">
            The Village
          </text>
          <text x="105" y="50" font-family="Arial, sans-serif" font-size="11" fill="#6B7280">
            Gestion familiale & communautaire
          </text>
        </svg>
      <% end %>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
<<<<<<< HEAD
          <% if user_signed_in? && current_user.family.present? %>
            <li class="nav-item">
              <%= link_to "Tableau de bord", families_path, class: "nav-link" %>
            </li>
            <li class="nav-item css-dropdown">
              <a class="nav-link dropdown-toggle" href="#" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                Gestion
              </a>
              <ul class="css-dropdown-menu">
                <li><%= link_to "Tâches", family_tasks_path(current_user.family), class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                <li><%= link_to "Calendrier", family_family_events_path(current_user.family), class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                <li><%= link_to "Documents", families_documents_path, class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                <li><%= link_to "Membres", new_person_path, class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
              </ul>
            </li>
            <li class="nav-item">
              <%= link_to "Communauté", events_path, class: "nav-link" %>
            </li>
=======
          <% if user_signed_in? %>
            <li class="nav-item">
              <%= link_to "Tableau de bord", families_path, class: "nav-link" %>
            </li>
            <% if current_user.family %>
              <li class="nav-item css-dropdown">
                <a class="nav-link dropdown-toggle" href="#" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                  Gestion
                </a>
                <ul class="css-dropdown-menu">
                  <li><%= link_to "Tâches", family_tasks_path(current_user.family), class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                  <li><%= link_to "Calendrier", family_family_events_path(current_user.family), class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                  <li><%= link_to "Documents", families_documents_path, class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                  <li><%= link_to "Membres", new_person_path, class: "dropdown-item", style: "background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;" %></li>
                </ul>
              </li>
            <% end %>
          <% end %>
          <li class="nav-item">
            <%= link_to "Communauté", events_path, class: "nav-link" %>
          </li>
          <% if user_signed_in? %>
>>>>>>> 6c448bf1f1c4e96172a8ee95d8d05611fa91434f
            <li class="nav-item">
              <%= link_to "Déconnexion", destroy_user_session_path, data: { turbo_method: :delete }, class: "nav-link" %>
            </li>
          <% else %>
            <li class="nav-item">
              <%= link_to "Connexion", new_user_session_path, class: "nav-link" %>
            </li>
<<<<<<< HEAD
            <li class="nav-item">
              <%= link_to "Inscription", new_user_registration_path, class: "nav-link" %>
            </li>
=======
>>>>>>> 6c448bf1f1c4e96172a8ee95d8d05611fa91434f
          <% end %>
        </ul>
      </div>
    </div>
  </nav>
