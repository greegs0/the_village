<!DOCTYPE html>
<html lang="fr">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>Calendrier Familial - The Village</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="globals.css" />
  <link rel="stylesheet" href="style-responsive.css" />
</head>
<body>
  <!-- Navigation -->
  <%= render 'shared/navbar' %>
  <%= yield %>

  <!-- Main Content -->
  <div class="container-fluid px-4 px-lg-5 py-4">
    <!-- Header -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4 gap-3">
      <div>
        <h1 class="h2 mb-2">Calendrier Familial</h1>
        <p class="text-secondary mb-0">Organisez les gardes, anniversaires et √©v√©nements</p>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-secondary">
          <span class="me-2">üì§</span>Exporter
        </button>
        <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#newEventModal">
          <span class="me-2">+</span>Nouvel √©v√©nement
        </button>
      </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-pills bg-light rounded-3 p-1 mb-4" role="tablist">
      <li class="nav-item flex-fill" role="presentation">
        <button class="nav-link active w-100" data-bs-toggle="pill" data-bs-target="#month" type="button">
          Mois
        </button>
      </li>
      <li class="nav-item flex-fill" role="presentation">
        <button class="nav-link w-100" data-bs-toggle="pill" data-bs-target="#week" type="button">
          Semaine
        </button>
      </li>
      <li class="nav-item flex-fill" role="presentation">
        <button class="nav-link w-100" data-bs-toggle="pill" data-bs-target="#list" type="button">
          Liste
        </button>
      </li>
    </ul>

    <!-- Tab Content -->
    <div class="tab-content">
      <div class="tab-pane fade show active" id="month">
        <!-- Google Calendar Integration -->
        <div class="card border rounded-4 mb-4" style="background: linear-gradient(135deg, rgba(239, 246, 255, 1) 0%, rgba(250, 245, 255, 1) 100%);">
          <div class="card-body p-4 d-flex flex-column flex-md-row align-items-center gap-3">
            <div class="fs-1">üìÖ</div>
            <div class="flex-grow-1">
              <h5 class="mb-1">Connectez votre Google Calendar</h5>
              <p class="text-secondary mb-0 small">
                Importez automatiquement vos rendez-vous et gardez tout synchronis√© en temps r√©el.
              </p>
            </div>
            <button class="btn btn-outline-dark">
              <span class="me-2">üîó</span>Connecter Google Calendar
            </button>
          </div>
        </div>

        <!-- Unavailability Section -->
        <div class="card border rounded-4 mb-4">
          <div class="card-body p-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div>
                <h5 class="mb-1">
                  <span class="me-2">üö´</span>Indisponibilit√©s
                </h5>
                <p class="text-secondary small mb-0">Bloquez des dates o√π vous n'√™tes pas disponible</p>
              </div>
              <button class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#unavailabilityModal">
                <span class="me-2">+</span>Ajouter
              </button>
            </div>

            <div class="d-flex flex-column gap-3">
              <div class="d-flex justify-content-between align-items-center bg-light rounded-3 p-3">
                <div class="d-flex align-items-center gap-3">
                  <div class="rounded-circle bg-secondary bg-opacity-25 d-flex align-items-center justify-content-center"
                       style="width: 40px; height: 40px;">
                    <span class="fw-medium">M</span>
                  </div>
                  <div>
                    <div class="fw-medium">Marc <span class="text-secondary">indisponible</span></div>
                    <small class="text-secondary">11 novembre ‚Üí 13 novembre</small>
                    <div class="small text-muted">D√©placement professionnel</div>
                  </div>
                </div>
                <button class="btn btn-sm btn-link">‚úèÔ∏è</button>
              </div>

              <div class="d-flex justify-content-between align-items-center bg-light rounded-3 p-3">
                <div class="d-flex align-items-center gap-3">
                  <div class="rounded-circle bg-secondary bg-opacity-25 d-flex align-items-center justify-content-center"
                       style="width: 40px; height: 40px;">
                    <span class="fw-medium">J</span>
                  </div>
                  <div>
                    <div class="fw-medium">Julie <span class="text-secondary">indisponible</span></div>
                    <small class="text-secondary">20 novembre</small>
                    <div class="small text-muted">Formation</div>
                  </div>
                </div>
                <button class="btn btn-sm btn-link">‚úèÔ∏è</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendar -->
        <div class="card border rounded-4 mb-4">
          <div class="card-body p-3 p-md-4">
            <!-- Calendar Header -->
            <div class="d-flex justify-content-between align-items-center mb-3">
              <div class="d-flex align-items-center gap-2">
                <button class="btn btn-sm btn-outline-secondary">‚óÄ</button>
                <h5 class="mb-0">Novembre 2025</h5>
                <button class="btn btn-sm btn-outline-secondary">‚ñ∂</button>
              </div>
              <button class="btn btn-sm btn-outline-secondary">Aujourd'hui</button>
            </div>

            <!-- Calendar Grid -->
            <div class="table-responsive">
              <table class="table table-bordered text-center">
                <thead>
                  <tr>
                    <th class="bg-light">Lun</th>
                    <th class="bg-light">Mar</th>
                    <th class="bg-light">Mer</th>
                    <th class="bg-light">Jeu</th>
                    <th class="bg-light">Ven</th>
                    <th class="bg-light">Sam</th>
                    <th class="bg-light">Dim</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">1</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">2</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">3</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">4</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">5</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">6</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">7</div>
                    </td>
                  </tr>
                  <tr>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">8</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">9</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">10</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">11</div>
                      <div class="badge bg-danger text-white small">Marc Indisponible</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">12</div>
                      <div class="badge bg-danger text-white small">Marc Indisponible</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">13</div>
                      <div class="badge bg-danger text-white small">Marc Indisponible</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">14</div>
                    </td>
                  </tr>
                  <tr>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">15</div>
                      <div class="badge bg-pink text-white small">Anniversaire Sophie</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">16</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">17</div>
                    </td>
                    <td class="p-2 bg-primary bg-opacity-10" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">18</div>
                      <div class="badge bg-success text-white small">R√©union parents-profs</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">19</div>
                      <div class="badge bg-primary text-white small">Garde Lucas - √âcole</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">20</div>
                      <div class="badge bg-danger text-white small">Julie Indisponible</div>
                      <div class="badge bg-primary text-white small">Garde Lucas</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">21</div>
                      <div class="badge bg-secondary text-white small">Dentiste - Sophie</div>
                    </td>
                  </tr>
                  <tr>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">22</div>
                      <div class="badge bg-secondary text-white small">Match de foot</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">23</div>
                      <div class="badge bg-secondary text-white small">Cours de piano</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">24</div>
                      <div class="badge bg-pink text-white small">Visite grands-parents</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">25</div>
                      <div class="badge bg-info text-white small">P√©diatre Lucas</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">26</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium text-primary">27</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">28</div>
                    </td>
                  </tr>
                  <tr>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">29</div>
                    </td>
                    <td class="p-2" style="height: 100px; vertical-align: top;">
                      <div class="fw-medium">30</div>
                    </td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;"></td>
                    <td class="p-2" style="height: 100px; vertical-align: top;"></td>
                    <td class="p-2" style="height: 100px; vertical-align: top;"></td>
                    <td class="p-2 bg-light" style="height: 100px; vertical-align: top;"></td>
                    <td class="p-2" style="height: 100px; vertical-align: top;"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <!-- Legend and Upcoming Events -->
        <div class="row g-4">
          <div class="col-lg-6">
            <div class="card border rounded-4 h-100">
              <div class="card-body p-4">
                <h5 class="mb-1">L√©gende</h5>
                <p class="text-secondary small mb-4">Types d'√©v√©nements</p>

                <div class="d-flex flex-column gap-2">
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #f6339a;"></div>
                    <span class="small">Anniversaire</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #2b7fff;"></div>
                    <span class="small">Garde d'enfant</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #c6005b;"></div>
                    <span class="small">Rendez-vous m√©dical</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #00c950;"></div>
                    <span class="small">√âv√©nement scolaire</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #1347e5;"></div>
                    <span class="small">Vacances</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <div class="rounded" style="width: 16px; height: 16px; background-color: #6a7282;"></div>
                    <span class="small">Autre</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-6">
            <div class="card border rounded-4 h-100">
              <div class="card-body p-4">
                <h5 class="mb-1">Prochains √©v√©nements</h5>
                <p class="text-secondary small mb-4">Dans les 7 prochains jours</p>

                <div class="d-flex flex-column gap-3">
                  <div class="d-flex align-items-center gap-3">
                    <div class="rounded" style="width: 40px; height: 40px; background-color: #f6339a;"></div>
                    <div>
                      <div class="fw-medium">Anniversaire Sophie</div>
                      <small class="text-secondary">14:00</small>
                    </div>
                  </div>

                  <div class="d-flex align-items-center gap-3">
                    <div class="rounded" style="width: 40px; height: 40px; background-color: #00c950;"></div>
                    <div>
                      <div class="fw-medium">R√©union parents-profs</div>
                      <small class="text-secondary">18:00</small>
                    </div>
                  </div>

                  <div class="d-flex align-items-center gap-3">
                    <div class="rounded" style="width: 40px; height: 40px; background-color: #2b7fff;"></div>
                    <div>
                      <div class="fw-medium">Garde Lucas - √âcole</div>
                      <small class="text-secondary">16:30</small>
                    </div>
                  </div>

                  <div class="d-flex align-items-center gap-3">
                    <div class="rounded" style="width: 40px; height: 40px; background-color: #2b7fff;"></div>
                    <div>
                      <div class="fw-medium">Garde Lucas - Mercredi</div>
                      <small class="text-secondary">09:00 - 17:00</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-pane fade" id="week">
        <p class="text-center text-muted py-5">Vue semaine √† venir</p>
      </div>

      <div class="tab-pane fade" id="list">
        <p class="text-center text-muted py-5">Vue liste √† venir</p>
      </div>
    </div>
  </div>

  <!-- Modal Indisponibilit√© -->
  <div class="modal fade" id="unavailabilityModal" tabindex="-1" aria-labelledby="unavailabilityModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4">
        <div class="modal-header border-0 pb-0">
          <div>
            <h5 class="modal-title fw-medium" id="unavailabilityModalLabel">Bloquer une p√©riode d'indisponibilit√©</h5>
            <p class="text-secondary small mb-0">Indiquez quand vous n'√™tes pas disponible pour les t√¢ches familiales</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body pt-3">
          <form>
            <!-- Qui est indisponible -->
            <div class="mb-3">
              <label for="unavailablePerson" class="form-label fw-medium">Qui est indisponible ?</label>
              <select class="form-select" id="unavailablePerson">
                <option selected>S√©lectionner un membre</option>
                <option value="marc">Marc</option>
                <option value="julie">Julie</option>
                <option value="sophie">Sophie</option>
                <option value="lucas">Lucas</option>
              </select>
            </div>

            <!-- Date de d√©but et Date de fin -->
            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="startDate" class="form-label fw-medium">Date de d√©but</label>
                <input type="date" class="form-control" id="startDate">
              </div>
              <div class="col-md-6">
                <label for="endDate" class="form-label fw-medium">Date de fin</label>
                <input type="date" class="form-control" id="endDate">
              </div>
            </div>

            <!-- Raison (optionnel) -->
            <div class="mb-4">
              <label for="reason" class="form-label fw-medium">Raison (optionnel)</label>
              <input type="text" class="form-control" id="reason" placeholder="Ex: D√©placement professionnel">
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-dark w-100">Bloquer cette p√©riode</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Nouvel √âv√©nement -->
  <div class="modal fade" id="newEventModal" tabindex="-1" aria-labelledby="newEventModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4">
        <div class="modal-header border-0 pb-0">
          <div>
            <h5 class="modal-title fw-medium" id="newEventModalLabel">Cr√©er un nouvel √©v√©nement</h5>
            <p class="text-secondary small mb-0">Ajoutez un √©v√©nement au calendrier familial</p>
          </div>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body pt-3">
          <form>
            <!-- Titre -->
            <div class="mb-3">
              <label for="eventTitle" class="form-label fw-medium">Titre</label>
              <input type="text" class="form-control" id="eventTitle" placeholder="Ex: Garde Lucas">
            </div>

            <!-- Type d'√©v√©nement et Assign√© √† -->
            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="eventType" class="form-label fw-medium">Type d'√©v√©nement</label>
                <select class="form-select" id="eventType">
                  <option selected>Choisir un type</option>
                  <option value="anniversaire">Anniversaire</option>
                  <option value="garde">Garde d'enfant</option>
                  <option value="medical">Rendez-vous m√©dical</option>
                  <option value="scolaire">√âv√©nement scolaire</option>
                  <option value="vacances">Vacances</option>
                  <option value="autre">Autre</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="assignedTo" class="form-label fw-medium">Assign√© √†</label>
                <select class="form-select" id="assignedTo">
                  <option selected>Qui s'en occupe?</option>
                  <option value="marc">Marc</option>
                  <option value="julie">Julie</option>
                  <option value="sophie">Sophie</option>
                  <option value="lucas">Lucas</option>
                  <option value="tous">Toute la famille</option>
                </select>
              </div>
            </div>

            <!-- Date et Heure -->
            <div class="row g-3 mb-3">
              <div class="col-md-6">
                <label for="eventDate" class="form-label fw-medium">Date</label>
                <input type="date" class="form-control" id="eventDate">
              </div>
              <div class="col-md-6">
                <label for="eventTime" class="form-label fw-medium">Heure</label>
                <input type="time" class="form-control" id="eventTime">
              </div>
            </div>

            <!-- Lieu -->
            <div class="mb-3">
              <label for="eventLocation" class="form-label fw-medium">Lieu</label>
              <input type="text" class="form-control" id="eventLocation" placeholder="Ex: √âcole primaire">
            </div>

            <!-- Description -->
            <div class="mb-3">
              <label for="eventDescription" class="form-label fw-medium">Description</label>
              <textarea class="form-control" id="eventDescription" rows="3" placeholder="D√©tails suppl√©mentaires..."></textarea>
            </div>

            <!-- Activer les rappels -->
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" id="enableReminders" checked>
              <label class="form-check-label fw-medium" for="enableReminders">
                Activer les rappels
              </label>
            </div>

            <!-- Partager avec d'autres familles -->
            <div class="mb-3">
              <label class="form-label fw-medium">Partager avec d'autres familles (optionnel)</label>
              <p class="text-secondary small mb-2">
                Vous pouvez partager cet √©v√©nement avec vos familles connect√©es depuis la page Connexions
              </p>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-dark w-100">Cr√©er l'√©v√©nement</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
