<div class="d-flex align-items-center justify-content-between rounded-3 p-3 mb-2 document-item"
     style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.04) 0%, rgba(118, 75, 162, 0.04) 100%); border: 1px solid rgba(102, 126, 234, 0.1);"
     data-document-id="<%= document.id %>"
     data-document-name="<%= document.name %>"
     data-document-icon="<%= document.icon_display %>"
     data-document-type="<%= document.file_type %>"
     data-document-size="<%= document.file_size_display %>"
     data-document-uploader="<%= document.uploader_name %>"
     data-document-folder="<%= document.folder&.name %>"
     data-document-time="<%= document.time_ago_display %>"
     data-document-favorite="<%= document.is_favorite %>"
     data-document-download="<%= document.file.attached? ? download_document_path(document) : '' %>"
     data-document-preview="<%= document.file.attached? ? url_for(document.file) : '' %>"
     onclick="openPreviewModal(this)"
     role="button">
  <div class="d-flex align-items-center">
    <div class="me-3">
      <span style="font-size: 1.5rem;"><%= document.icon_display %></span>
    </div>
    <div>
      <div class="fw-semibold"><%= document.name %></div>
      <small class="text-muted">
        <%= document.file_size_display %> ‚Ä¢
        <%= document.time_ago_display %> ‚Ä¢
        <%= document.uploader_name %>
        <% if document.folder.present? %>
          ‚Ä¢ <span class="gradient-link"><%= document.folder.name %></span>
        <% end %>
      </small>
    </div>
  </div>
  <div class="d-flex align-items-center gap-2">
    <button class="btn btn-sm <%= document.is_favorite ? 'btn-primary' : 'btn-outline-secondary' %>"
            onclick="event.stopPropagation(); toggleFavorite(<%= document.id %>, this);"
            style="animation: none !important;">
      <span style="<%= document.is_favorite ? '-webkit-text-fill-color: white;' : 'background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;' %>"><%= document.is_favorite ? '‚òÖ' : '‚òÜ' %></span>
    </button>
    <div class="dropdown" onclick="event.stopPropagation();">
      <button class="btn btn-sm btn-link p-1" data-bs-toggle="dropdown">
        ‚ãÆ
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <% if document.file.attached? %>
          <li><%= link_to "üì• T√©l√©charger", download_document_path(document), class: "dropdown-item" %></li>
        <% end %>
        <li><a class="dropdown-item text-danger" href="#" onclick="deleteDocument(<%= document.id %>)">üóëÔ∏è Supprimer</a></li>
      </ul>
    </div>
  </div>
</div>
