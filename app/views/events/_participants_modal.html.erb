<% participants_count = event.participants.count %>
<div class="village-dialog" id="participantsModal<%= event.id %>" style="display: none;">
  <div class="village-dialog-backdrop" onclick="VillageModal.close('participantsModal<%= event.id %>')"></div>
  <div class="village-dialog-container">
    <div class="village-dialog-content rounded-4" style="border: 1px solid rgba(102, 126, 234, 0.2); background: white;">
      <div class="village-dialog-header border-0 p-4 pb-2">
        <div>
          <h5 class="fw-semibold mb-1" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Participants inscrits</h5>
          <p class="text-secondary small mb-0"><%= participants_count %> participant<%= participants_count > 1 ? 's' : '' %> inscrit<%= participants_count > 1 ? 's' : '' %> / <%= event.max_participations %> places</p>
        </div>
        <button type="button" class="btn-close" onclick="VillageModal.close('participantsModal<%= event.id %>')" aria-label="Close"></button>
      </div>
      <div class="village-dialog-body p-4 pt-2">
        <% if event.participants.any? %>
          <ul class="list-group list-group-flush">
            <% event.participants.each do |participant| %>
              <li class="list-group-item d-flex align-items-center gap-3 px-0" style="border-color: rgba(102, 126, 234, 0.1) !important;">
                <div class="rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                  <span class="fw-medium text-white"><%= participant.name.split.map(&:first).join.upcase %></span>
                </div>
                <div>
                  <div class="fw-medium"><%= participant.name %></div>
                  <% if participant.email.present? %>
                    <small class="text-muted"><%= participant.email %></small>
                  <% end %>
                </div>
              </li>
            <% end %>
          </ul>
        <% else %>
          <div class="text-center py-4">
            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-3" style="width: 56px; height: 56px; background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#667eea" stroke-width="1.5">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
            </div>
            <p class="text-secondary mb-0">Aucun participant inscrit pour le moment</p>
            <p class="text-muted small mt-2">Soyez le premier Ã  vous inscrire !</p>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
